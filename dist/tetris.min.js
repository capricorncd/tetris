/*! For license information please see tetris.min.js.LICENSE.txt */
(()=>{var t={807:(t,e,r)=>{"use strict";r.d(e,{Z:()=>v});var i=r(645),n=r.n(i),s=r(667),o=r.n(s),a=r(24),c=r(693),d=r(912),u=r(147),p=n()((function(t){return t[1]})),l=o()(a.Z),h=o()(c.Z),f=o()(d.Z),g=o()(u.Z);p.push([t.id,'.zx-tetris-container{position:relative;background-color:#333;display:flex;flex-direction:column;max-width:100%;width:290px;margin:0 auto}.zx-tetris-container *{user-select:none;-webkit-touch-callout:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.zx-tetris-container button{outline:none;cursor:pointer;background:none}.zx-tetris-container audio{display:none}.zx-tetris-container .zx-tetris__inner{position:relative;display:flex}.zx-tetris-container .tetris-start-button-wrapper{position:absolute;z-index:10;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.9);display:flex;align-items:center;justify-content:center}.zx-tetris-container .tetris-start-button-wrapper button{width:200px;height:50px;border-radius:25px;color:#ffd605;border:1px solid #ffd605}.zx-tetris-container .tetris-stage{position:relative;width:200px;height:400px;flex:0 0 200px}.zx-tetris-container .tetris-stage:after{display:block;position:absolute;z-index:1;top:50%;margin-top:-7px;width:100%;text-align:center;font-size:14px;line-height:1;color:#fff;content:"©Capricorncd";filter:Alpha(opacity=20);opacity:.2}.zx-tetris-container .tetris-sider-wrapper{position:relative;height:400px;margin-left:10px}.zx-tetris-container .tetris-sider-wrapper .next-square{width:80px;height:80px}.zx-tetris-container .tetris-sider-wrapper .tetris-statistics{margin-top:10px}.zx-tetris-container .tetris-sider-wrapper .tetris-statistics .game-times{color:#fff}.zx-tetris-container .tetris-sider-wrapper .tetris-statistics .game-scores{margin-top:10px;color:#fff}.zx-tetris-container .tetris-sider-wrapper .tetris-statistics .game-scores span{display:block}.zx-tetris-container .tetris-sider-wrapper .tetris-statistics .game-scores span.label{opacity:.5;font-size:.8em}.zx-tetris-container .tetris-sider-wrapper .tetris-statistics .history-score .score{color:#7ddf66}.zx-tetris-container .tetris-sider-wrapper .control-wrapper{position:relative;margin-top:20px}.zx-tetris-container .tetris-sider-wrapper .control-wrapper button,.zx-tetris-container .tetris-sider-wrapper .control-wrapper .volume{box-sizing:border-box;margin:0 0 20px 0;width:80px;height:30px;text-align:center;color:#ffd605;border:1px solid #ffd605;border-radius:24px}.zx-tetris-container .tetris-sider-wrapper .control-wrapper button.tetris-setup,.zx-tetris-container .tetris-sider-wrapper .control-wrapper .volume.tetris-setup{color:#999;border-color:#999}.zx-tetris-container .tetris-sider-wrapper .control-wrapper button.tetris-pause,.zx-tetris-container .tetris-sider-wrapper .control-wrapper .volume.tetris-pause{color:#7ddf66;border-color:#7ddf66}.zx-tetris-container .tetris-sider-wrapper .control-wrapper .volume{position:relative;display:flex;align-items:stretch}.zx-tetris-container .tetris-sider-wrapper .control-wrapper .volume:after{position:absolute;bottom:-15px;left:50%;transform:translateX(-50%);content:"volume";font-size:.8em;opacity:.5}.zx-tetris-container .tetris-sider-wrapper .control-wrapper .volume span{flex:0 0 20px;background:rgba(255,255,0,.4);display:flex;align-items:center;justify-content:center;cursor:pointer}.zx-tetris-container .tetris-sider-wrapper .control-wrapper .volume span.l{border-radius:14px 0 0 14px}.zx-tetris-container .tetris-sider-wrapper .control-wrapper .volume span.r{border-radius:0 14px 14px 0}.zx-tetris-container .tetris-sider-wrapper .control-wrapper .volume b{flex:1;display:flex;align-items:center;justify-content:center}.zx-tetris-container .current{background:url('+l+") no-repeat 0 0;z-index:2}.zx-tetris-container .done{background:url("+h+") no-repeat 0 0;z-index:2}.zx-tetris-container .none{z-index:0;background:url("+f+") no-repeat 0 0;opacity:.2;filter:Alpha(opacity=20)}.zx-tetris-container .next-square .current{background:url("+g+') no-repeat 0 0;background-size:cover}.zx-tetris-container .next-square .none{background:none}.zx-tetris-container .none,.zx-tetris-container .current,.zx-tetris-container .done{position:absolute;width:20px;height:20px;box-sizing:border-box;background-size:cover}.zx-tetris-container .tetris-control-wrapper{position:relative;margin-top:10px}.zx-tetris-container .tetris-control-wrapper .grid-wrapper{display:flex}.zx-tetris-container .tetris-control-wrapper .grid-wrapper .grid{flex:1}.zx-tetris-container .tetris-control-wrapper .grid-wrapper .grid button{display:block;width:100%;height:40px;color:#999;border:1px solid #999;background:none;box-sizing:border-box}.zx-tetris-container .tetris-control-wrapper .grid-wrapper .grid button.btn-left{border-right:0}.zx-tetris-container .tetris-control-wrapper .grid-wrapper .grid button.btn-right{border-left:0}.zx-tetris-container .tetris-control-wrapper .grid-wrapper .grid button.btn-rotate{border-bottom:0}.zx-tetris-container .tetris-control-wrapper .grid-wrapper .grid button.btn-down{border-top:0}.game-over .tetris-pause{color:#999 !important;border-color:#999 !important}.game-over .done{background-size:cover}.ie-brower .tetris-control-wrapper{position:absolute;top:420px;left:0;width:320px}.ie-brower .tetris-control-wrapper .next-square .none{background:none !important}.ie-brower .tetris-control-wrapper .grid-wrapper{height:42px;overflow:hidden}.ie-brower .tetris-control-wrapper .grid-wrapper .grid{float:left;width:33.3%}.ie-brower .tetris-control-wrapper .grid-wrapper .grid:after{content:".";font-size:1px}',""]);const v=p},645:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,i){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(i)for(var s=0;s<this.length;s++){var o=this[s][0];null!=o&&(n[o]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);i&&n[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),e.push(c))}},e}},667:t=>{"use strict";t.exports=function(t,e){return e||(e={}),"string"!=typeof(t=t&&t.__esModule?t.default:t)?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},652:function(t){"undefined"!=typeof self&&self,t.exports=(()=>{"use strict";var t={949:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toTwoDigits=void 0,e.toTwoDigits=function(t){return t[1]?t:"0"+t}},607:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toDate=e.formatDate=void 0;var i=r(949),n={weeks:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]};function s(t){if(t instanceof Date)return t;if("number"==typeof t)return new Date(t);if("string"==typeof t){var e=t.trim();if(/^\d+$/.test(e)){var r=e.length;return 8===r?new Date([e.substr(0,4),e.substr(4,2),e.substr(6,2)].join("/")):6===r?new Date([e.substr(0,4),e.substr(4,2),"01"].join("/")):4===r?new Date(e+"/01/01"):new Date(parseInt(t))}if(e=e.replace(/[年月日]/g,(function(t){return"日"===t?"":"/"})).replace(/[(（（].*?[)））]/g," ").replace(/\bam|pm\b/gi," ").replace(/\s+/g," "),/^(\d{4})[-/](\d{1,2})[-/](\d{1,2})$/.test(e))return new Date([RegExp.$1,RegExp.$2,RegExp.$3].join("/"));if(/^(\d{4})[-/](\d{1,2})$/.test(e))return new Date([RegExp.$1,RegExp.$2,"01"].join("/"));var i=new Date(e);return isNaN(i.getFullYear())?null:i}return null}e.formatDate=function(t,e,r){var o,a=s(t);if(!a||!e)return t+"";if("timestamp"===e)return a.getTime().toString();/(y+)/i.test(e)&&(o=RegExp.$1,e=e.replace(o,(a.getFullYear()+"").substr(4-o.length))),r&&Array.isArray(r.weeks)||(r=n);var c={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"w+":a.getDay(),"W+":r.weeks[a.getDay()],"a+":a.getHours()<12?"am":"pm","A+":a.getHours()<12?"AM":"PM"};for(var d in c)if(new RegExp("("+d+")").test(e)){o=RegExp.$1;var u=c[d]+"";e=e.replace(o,1===o.length?u:i.toTwoDigits(u))}if(/(g)/i.test(e)){var p=a.toString().split(/\s+/).slice(5),l=e.includes("g");e=e.replace(/g/i,l?p[0]:p.join(" "))}return e},e.toDate=s}},e={};return function r(i){if(e[i])return e[i].exports;var n=e[i]={exports:{}};return t[i](n,n.exports,r),n.exports}(607)})()},693:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});const i=r.p+"green.png"},912:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});const i=r.p+"none.png"},24:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});const i=r.p+"red.png"},147:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});const i=r.p+"yellow.png"},825:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});const i=r.p+"bgm.mp3"},130:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});const i=r.p+"bubble2.mp3"},540:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});const i=r.p+"game-over-tetries.mp3"},170:(t,e,r)=>{"use strict";r.d(e,{Z:()=>i});const i=r.p+"remove.mp3"},379:(t,e,r)=>{"use strict";var i,n=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),s=[];function o(t){for(var e=-1,r=0;r<s.length;r++)if(s[r].identifier===t){e=r;break}return e}function a(t,e){for(var r={},i=[],n=0;n<t.length;n++){var a=t[n],c=e.base?a[0]+e.base:a[0],d=r[c]||0,u="".concat(c," ").concat(d);r[c]=d+1;var p=o(u),l={css:a[1],media:a[2],sourceMap:a[3]};-1!==p?(s[p].references++,s[p].updater(l)):s.push({identifier:u,updater:g(l,e),references:1}),i.push(u)}return i}function c(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var s=r.nc;s&&(i.nonce=s)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(e);else{var o=n(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var d,u=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function p(t,e,r,i){var n=r?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=u(e,n);else{var s=document.createTextNode(n),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}function l(t,e,r){var i=r.css,n=r.media,s=r.sourceMap;if(n?t.setAttribute("media",n):t.removeAttribute("media"),s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var h=null,f=0;function g(t,e){var r,i,n;if(e.singleton){var s=f++;r=h||(h=c(e)),i=p.bind(null,r,s,!1),n=p.bind(null,r,s,!0)}else r=c(e),i=l.bind(null,r,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i));var r=a(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<r.length;i++){var n=o(r[i]);s[n].references--}for(var c=a(t,e),d=0;d<r.length;d++){var u=o(r[d]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}r=c}}}}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={id:i,exports:{}};return t[i].call(s.exports,s,s.exports,r),s.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})();var i={};(()=>{"use strict";r.r(i),r.d(i,{Tetris:()=>g});var t={q:function(t){return document.querySelector(t)},eventListener:function(t,e,r){t?t.addEventListener(e,r,!1):console.error("The this.eventListener() DOM node is undefined")},isIEBrower:"Microsoft Internet Explorer"===navigator.appName,ieBrowerVersion:function(){return/MSIE (\d+)/gi.test(navigator.userAgent)?+RegExp.$1:0},rand:function(t){return void 0===t&&(t=1),Math.ceil(Math.random()*t)},ft:function(e){var r=t.fd(Math.floor(e/60))+":"+t.fd(e%60);return e>3600?t.fd(Math.floor(e/3600))+":"+r:r},fd:function(t){return t<10?"0"+t:t+""},checkPoint:function(t,e,r,i){return!(t.x+e<0||t.x+e>=i.length||t.y+r<0||t.y+r>=i[0].length||1===i[t.x+e][t.y+r])}};const e=t;var n="maxScoreInfo";function s(){try{var t=localStorage.getItem(n);if(t)return JSON.parse(t)}catch(t){}return null}function o(t){if(!((s()||{score:0,date:0}).score>=t)){var e={score:t,date:+new Date};localStorage.setItem(n,JSON.stringify(e))}}const a=function(){function t(t){void 0===t&&(t=0),this.data=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.SQUARES={1:[[[0,2,0,0],[0,2,0,0],[0,2,0,0],[0,2,0,0]],[[0,0,0,0],[2,2,2,2],[0,0,0,0],[0,0,0,0]]],2:[[[2,0,0,0],[2,2,0,0],[0,2,0,0],[0,0,0,0]],[[0,2,2,0],[2,2,0,0],[0,0,0,0],[0,0,0,0]]],3:[[[2,0,0,0],[2,0,0,0],[2,2,0,0],[0,0,0,0]],[[2,2,2,0],[2,0,0,0],[0,0,0,0],[0,0,0,0]],[[2,2,0,0],[0,2,0,0],[0,2,0,0],[0,0,0,0]],[[0,0,2,0],[2,2,2,0],[0,0,0,0],[0,0,0,0]]],4:[[[0,2,0,0],[0,2,0,0],[2,2,0,0],[0,0,0,0]],[[2,0,0,0],[2,2,2,0],[0,0,0,0],[0,0,0,0]],[[2,2,0,0],[2,0,0,0],[2,0,0,0],[0,0,0,0]],[[2,2,2,0],[0,0,2,0],[0,0,0,0],[0,0,0,0]]],5:[[[2,0,0,0],[2,2,0,0],[2,0,0,0],[0,0,0,0]],[[2,2,2,0],[0,2,0,0],[0,0,0,0],[0,0,0,0]],[[0,2,0,0],[2,2,0,0],[0,2,0,0],[0,0,0,0]],[[0,2,0,0],[2,2,2,0],[0,0,0,0],[0,0,0,0]]],6:[[[2,2,0,0],[2,2,0,0],[0,0,0,0],[0,0,0,0]],[[2,2,0,0],[2,2,0,0],[0,0,0,0],[0,0,0,0]]],7:[[[0,2,0,0],[2,2,0,0],[2,0,0,0],[0,0,0,0]],[[2,2,0,0],[0,2,2,0],[0,0,0,0],[0,0,0,0]]]},this.origin={x:0,y:0},this.dir=0,this.rotates=this.SQUARES[t]}return t.prototype.isValid=function(t,r,i){for(var n=0;n<r.length;n++)for(var s=0;s<r[0].length;s++)if(0!==r[n][s]&&!e.checkPoint(t,n,s,i))return!1;return!0},t.prototype.canRotate=function(t){for(var e=this.rotates.length,r=(this.dir+1)%e,i=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],n=0;n<this.data.length;n++)for(var s=0;s<this.data[0].length;s++)i[n][s]=this.rotates[r][n][s];return this.isValid(this.origin,i,t)},t.prototype.rotate=function(t){var e,r;for(void 0===t&&(t=1),this.dir=(this.dir+t)%this.rotates.length,e=0;e<this.data.length;e++)for(r=0;r<this.data[0].length;r++)this.data[e][r]=this.rotates[this.dir][e][r]},t.prototype.canDown=function(t){var e={};return e.x=this.origin.x+1,e.y=this.origin.y,this.isValid(e,this.data,t)},t.prototype.down=function(){this.origin.x+=1},t.prototype.canLeft=function(t){var e={};return e.x=this.origin.x,e.y=this.origin.y-1,this.isValid(e,this.data,t)},t.prototype.left=function(){this.origin.y-=1},t.prototype.canRight=function(t){var e={};return e.x=this.origin.x,e.y=this.origin.y+1,this.isValid(e,this.data,t)},t.prototype.right=function(){this.origin.y+=1},t.prototype.canUp=function(t){var e={};return e.x=this.origin.x-1,e.y=this.origin.y,this.isValid(e,this.data,t)},t.prototype.up=function(){this.origin.x-=1},t}();var c={container:"body",ready:function(){},error:function(){}},d=r(379),u=r.n(d),p=r(807);u()(p.Z,{insert:"head",singleton:!1}),p.Z.locals;var l=function(){function t(){var t=window.AudioContext||window.webkitAudioContext;this.context=new t,this.gainNode=this.context.createGain(),this.gainNode.gain.value=.1,this.gainNode.connect(this.context.destination),this.buffers={},this.sources={}}return t.prototype.addSource=function(t,e,r){var i,n=this,s="string"==typeof t?((i={})[t]=e,i):t;return r="function"==typeof e?e:r,new Promise((function(t){var e=Object.entries(s),i=e.length;if(!i)return r&&r(1),void t();for(var o=0,a=function(e,s){fetch(s).then((function(s){s.arrayBuffer().then((function(s){n.context.decodeAudioData(s,(function(s){n.buffers[e]=s,o++,r&&r(o/i),o===i&&t()}),(function(e){console.error(e),o++,r&&r(o/i),o===i&&t()}))}))}))},c=0,d=e;c<d.length;c++){var u=d[c];a(u[0],u[1])}}))},t.prototype.play=function(t,e){var r=this;if(void 0===e&&(e=!1),this.sources[t])this.sources[t].connect(this.gainNode);else{if(!this.buffers[t])throw new Error('"'+t+'" audio is not registered');var i=this.context.createBufferSource();i.connect(this.gainNode),i.buffer=this.buffers[t],i.loop=e,i.start(),e&&(this.sources[t]=i),i.addEventListener("ended",(function(){i.disconnect(r.gainNode),i=null}))}},t.prototype.pause=function(t){this.sources[t]&&this.sources[t].disconnect(this.gainNode)},t.prototype.setVolume=function(t){this.gainNode.gain.value=t},t}(),h=r(652),f=function(){return(f=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++)for(var n in e=arguments[r])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},g=function(){function t(t){this.INTERVAL=500,this.moveTimer=null,this.gameTimer=null,this.gameTimes=0,this.isGameOver=!1,this.isPause=!0,this.isLoaded=!1,this.gameScores=0,this.stageArray=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],this.currSquare=null,this.nextSquare=null,this.stageDivs=[],this.nextDivs=[],this.outerDom=null,this.dom=null,this.domId="Tetris_"+(new Date).getTime(),this.opts=f(f({},c),t),this.outerDom=e.q(this.opts.container),this.audio=new l,this.init()}return t.prototype.createGameDom=function(){this.dom=document.createElement("div"),this.dom.className="zx-tetris-container",this.dom.id=this.domId,this.dom.innerHTML='\n      <div class="tetris-start-button-wrapper"><button>0%</button></div>\n      <section class="zx-tetris__inner">\n      <div class="tetris-stage"></div>\n      <div class="tetris-sider-wrapper">\n        <div class="next-square"></div>\n        <div class="tetris-statistics">\n          <div class="game-times">\n            <span class="times">00:00</span>\n          </div>\n          <div class="game-scores">\n            <span class="label">Score:</span>\n            <span class="score">0</span>\n          </div>\n          <div class="game-scores history-score">\n            <span class="label">Highest score in history</span>\n            <span class="label hook-date"></span>\n            <span class="score">0</span>\n          </div>\n        </div>\n        <div class="control-wrapper">\n\x3c!--          <button class="tetris-setup">Setup</button>--\x3e\n          <button class="tetris-restart">Restart</button>\n          <button class="tetris-pause">Pause</button>\n          <div class="volume"><span class="l">-</span><b>10</b><span class="r">+</span></div>\n        </div>\n      </div>\n      </section>\n      <div class="tetris-control-wrapper">\n        <div class="grid-wrapper">\n          <div class="grid"></div>\n          <div class="grid">\n            <button class="btn-rotate">Rotate</button>\n          </div>\n          <div class="grid"></div>\n        </div>\n        <div class="grid-wrapper">\n          <div class="grid">\n            <button class="btn-left">Left</button>\n          </div>\n          <div class="grid">\n            <button class="btn-fall">OK</button>\n          </div>\n          <div class="grid">\n            <button class="btn-right">Right</button>\n          </div>\n        </div>\n        <div class="grid-wrapper">\n          <div class="grid"></div>\n          <div class="grid">\n            <button class="btn-down">Down</button>\n          </div>\n          <div class="grid"></div>\n        </div>\n      </div>\n    ',this.outerDom?(this.outerDom.innerHTML="",this.outerDom.appendChild(this.dom),this.opts.ready({code:0,msg:"Tetris readied in '"+this.opts.container+"'"})):this.opts.error({code:2,msg:"创建Tetris DOM失败，请升级浏览器或引入jQuery/Zepte库"})},t.prototype.gameController=function(){var t=this;e.eventListener(document,"keydown",(function(e){e.preventDefault();var r=e.keyCode,i=e.key;if("Enter"===i||13===r){if(t.isGameOver)return;t.pause()}"Shift"!==i&&16!==r||t.restart(),t.isPause||("ArrowUp"===i||38===r?t.rotate():"ArrowRight"===i||39===r?t.right():"ArrowDown"===i||40===r?t.down(!0):"ArrowLeft"===i||37===r?t.left():" "!==i&&32!==r||t.fall())})),e.eventListener(e.q("#"+this.domId+" .btn-left"),"click",(function(){t.isPause||t.left()})),e.eventListener(e.q("#"+this.domId+" .btn-right"),"click",(function(){t.isPause||t.right()})),e.eventListener(e.q("#"+this.domId+" .btn-down"),"click",(function(){t.isPause||t.down(!0)})),e.eventListener(e.q("#"+this.domId+" .btn-rotate"),"click",(function(){t.isPause||t.rotate()})),e.eventListener(e.q("#"+this.domId+" .btn-fall"),"click",(function(){t.isPause||t.fall()})),e.eventListener(e.q("#"+this.domId+" .tetris-pause"),"click",(function(){t.isGameOver||t.pause()})),e.eventListener(e.q("#"+this.domId+" .tetris-restart"),"click",(function(){t.restart()}))},t.prototype.initDiv=function(t,r,i){for(var n=e.ieBrowerVersion(),s=0;s<r.length;s++){for(var o=[],a=0;a<r[0].length;a++){var c=document.createElement("div");c.className="none",e.isIEBrower&&n<=9?(c.style.top=20*s+"px",c.style.left=20*a+"px"):c.style.transform="translate("+20*a+"px, "+20*s+"px)",t.appendChild(c),o.push(c)}i.push(o)}},t.prototype.refreshDiv=function(t,e){void 0===t&&(t=this.stageArray),void 0===e&&(e=this.stageDivs);for(var r=0;r<t.length;r++)for(var i=0;i<t[0].length;i++)0===t[r][i]?e[r][i].className="none":1===t[r][i]?e[r][i].className="done":2===t[r][i]&&(e[r][i].className="current")},t.prototype.resetPos=function(t){void 0===t&&(t="set");var r,i,n=this.currSquare,s=n.origin.x,o=n.origin.y;for(r=0;r<n.data.length;r++)for(i=0;i<n.data[0].length;i++)e.checkPoint(n.origin,r,i,this.stageArray)&&("clear"===t?this.stageArray[s+r][o+i]=0:"set"===t&&(this.stageArray[s+r][o+i]=n.data[r][i]))},t.prototype.rotate=function(){var t=this.currSquare;t.canRotate(this.stageArray)&&(this.resetPos("clear"),t.rotate(),this.resetPos("set"),this.refreshDiv(),this.audio.play("move"))},t.prototype.left=function(){var t=this.currSquare;t.canLeft(this.stageArray)&&(this.resetPos("clear"),t.left(),this.resetPos("set"),this.refreshDiv(),this.audio.play("move"))},t.prototype.right=function(){var t=this.currSquare;t.canRight(this.stageArray)&&(this.resetPos("clear"),t.right(),this.resetPos("set"),this.refreshDiv(),this.audio.play("move"))},t.prototype.down=function(t){void 0===t&&(t=!1);var e=this.currSquare;return!!e.canDown(this.stageArray)&&(this.resetPos("clear"),e.down(),this.resetPos("set"),this.refreshDiv(),t&&this.audio.play("move"),!0)},t.prototype.fall=function(){for(;this.down(););this.isPause||this.isGameOver||this.audio.play("move")},t.prototype.fixed=function(){var t,r,i=this.currSquare,n=i.data;for(t=0;t<n.length;t++)for(r=0;r<n[0].length;r++)e.checkPoint(i.origin,t,r,this.stageArray)&&2===this.stageArray[i.origin.x+t][i.origin.y+r]&&(this.stageArray[i.origin.x+t][i.origin.y+r]=1);this.refreshDiv()},t.prototype.checkGameOver=function(){for(var t=0;t<this.stageArray[0].length;t++)if(1===this.stageArray[0][t])return this.audio.play("death"),this.audio.pause("bgm"),o(this.gameScores),!0;return!1},t.prototype.performNext=function(t,e){this.currSquare=this.nextSquare,this.resetPos("set"),this.nextSquare=this.make(t,e),this.refreshDiv(),this.refreshDiv(this.nextSquare.data,this.nextDivs)},t.prototype.checkClear=function(){var t,e,r,i,n=0;for(t=this.stageArray.length-1;t>=0;t--){var s=!0;for(e=0;e<this.stageArray[0].length;e++)if(1!==this.stageArray[t][e]){s=!1;break}if(s){for(this.audio.play("remove"),n+=1,r=t;r>0;r--)for(i=0;i<this.stageArray[0].length;i++)this.stageArray[r][i]=this.stageArray[r-1][i];for(i=0;i<this.stageArray[0].length;i++)this.stageArray[0][i]=0;t++}}return n},t.prototype.make=function(t,e){void 0===t&&(t=1);var r=new a(t);return r.origin.x=0,r.origin.y=3,r.rotate(e),r},t.prototype.move=function(){if(!this.down()){this.fixed();var t=this.checkClear();this.addScore(t),this.checkGameOver()?this.stop():this.performNext(e.rand(7),e.rand(4))}},t.prototype.pause=function(){var t=this;this.isGameOver||(this.isPause?(this.audio.play("bgm",!0),this.isPause=!1,this.moveTimer=setInterval((function(){t.move()}),this.INTERVAL),this.gameTimeMeter(),e.q("#"+this.domId+" .tetris-pause").innerText="Pause"):(this.audio.pause("bgm"),this.isPause=!0,this.moveTimer&&(clearInterval(this.moveTimer),this.moveTimer=null),this.gameTimer&&(clearInterval(this.gameTimer),this.gameTimer=null),e.q("#"+this.domId+" .tetris-pause").innerText="Start"))},t.prototype.restart=function(){var t=this;this.moveTimer&&(clearInterval(this.moveTimer),this.moveTimer=null),this.gameTimer&&(clearInterval(this.gameTimer),this.gameTimer=null);for(var r=0;r<this.stageArray.length;r++)for(var i=0;i<this.stageArray[0].length;i++)this.stageArray[r][i]=0;this.nextSquare=this.make(e.rand(7),e.rand(4)),this.refreshDiv(),this.refreshDiv(this.nextSquare.data,this.nextDivs),(this.isGameOver||this.isPause)&&this.audio.play("bgm",!0),this.initHistoryScore(),this.isGameOver=!1,this.isPause=!1,this.gameTimeMeter(),this.INTERVAL=500,this.gameTimes=0,this.gameScores=0,this.performNext(e.rand(7),e.rand(4)),this.moveTimer=setInterval((function(){t.move()}),this.INTERVAL),e.q("#"+this.domId+" .tetris-pause").innerText="Pause",e.q("#"+this.domId).className="zx-tetris-container"},t.prototype.stop=function(){this.isGameOver=!0,this.moveTimer&&(clearInterval(this.moveTimer),this.moveTimer=null),e.q("#"+this.domId).className="zx-tetris-container game-over"},t.prototype.gameTimeMeter=function(){var t=this;this.gameTimer=setInterval((function(){t.gameTimes++,e.q("#"+t.domId+" .times").innerText=e.ft(t.gameTimes),t.isGameOver&&t.gameTimer&&(clearInterval(t.gameTimer),t.gameTimer=null)}),1e3)},t.prototype.addScore=function(t){var r=0;switch(t){case 1:r=100;break;case 2:r=300;break;case 3:r=600;break;case 4:r=1e3}this.gameScores+=r,e.q("#"+this.domId+" .score").innerText=this.gameScores+"",this.setDownInterval(this.gameScores)},t.prototype.setDownInterval=function(t){t>64e4?this._updateSpeed(100):t>32e4?this._updateSpeed(150):t>16e4?this._updateSpeed(200):t>8e4?this._updateSpeed(250):t>4e4?this._updateSpeed(300):t>2e4?this._updateSpeed(350):t>1e4?this._updateSpeed(400):t>5e3&&this._updateSpeed(450)},t.prototype._updateSpeed=function(t){var e=this;t!==this.INTERVAL&&(this.INTERVAL=t,this.moveTimer&&clearInterval(this.moveTimer),this.moveTimer=setInterval((function(){e.move()}),this.INTERVAL))},t.prototype.init=function(){var t=this;if(this.createGameDom(),this.nextSquare=this.make(e.rand(7),e.rand(4)),this.initDiv(e.q("#"+this.domId+" .tetris-stage"),this.stageArray,this.stageDivs),this.initDiv(e.q("#"+this.domId+" .next-square"),this.nextSquare.data,this.nextDivs),this.refreshDiv(this.nextSquare.data,this.nextDivs),this.gameController(),this.performNext(e.rand(7),e.rand(4)),e.isIEBrower&&e.ieBrowerVersion()<10){var r=e.q("body"),i=r.className||"";-1===i.indexOf("ie-brower")&&(r.className="ie-brower "+i)}var n=this.dom,s=n.querySelector(".tetris-start-button-wrapper button");s&&(this.initAudio(s),s.addEventListener("click",(function(){var e;t.isLoaded&&(t.isPause=!1,t.audio.play("bgm",!0),(null===(e=t.dom)||void 0===e?void 0:e.querySelector(".tetris-start-button-wrapper")).style.display="none",t.moveTimer=setInterval((function(){t.move()}),t.INTERVAL),t.gameTimeMeter(),setTimeout((function(){t.audio.setVolume(.1)}),5e3))})));var o=10,a=n.querySelector(".volume b"),c=n.querySelector(".volume .l"),d=n.querySelector(".volume .r");c.addEventListener("click",(function(e){e.preventDefault(),o=Math.max(0,o-10),t.audio.setVolume(o/100),a.innerText=String(o)})),d.addEventListener("click",(function(e){e.preventDefault(),o=Math.min(500,o+10),t.audio.setVolume(o/100),a.innerText=String(o)}))},t.prototype.initHistoryScore=function(){var t,e,r=null===(t=this.dom)||void 0===t?void 0:t.querySelector(".history-score .score"),i=null===(e=this.dom)||void 0===e?void 0:e.querySelector(".history-score .hook-date"),n=s();r&&i&&n&&n.score&&(i.innerText=(0,h.formatDate)(n.date,"MM/dd hh:mm"),r.innerText=String(n.score))},t.prototype.initAudio=function(t){var e=this,i={bgm:r(825).Z,move:r(130).Z,death:r(540).Z,remove:r(170).Z};this.audio.addSource(i,(function(r){e.isLoaded=1===r,t.innerText=e.isLoaded?"Start":Math.round(100*r)+"%"})).then((function(){return console.log("audio loaded!")}))},t}()})();var n=window;for(var s in i)n[s]=i[s];i.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();